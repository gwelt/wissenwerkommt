<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<link rel="icon" type="image/png" href="images/apple-touch-icon-precomposed.png">
<script>
// Polyfills
if ((!Array.prototype.includes)||(!Array.prototype.find)) {loadScript('polyfills.js',afterPolyfill)}
function loadScript(src, done) {
  var js = document.createElement('script');
  js.src = src;
  js.onload = function() {
    done(src+' executed');
  };
  document.head.appendChild(js);
}
function afterPolyfill(m) {debug(m)}
// Service-Worker
/*
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(function(reg){
      debug("The service worker registered.");
    }).catch(function(err) {
      debug("Something went wrong while registering the service worker. This happened: ", err)
    });
}
*/

var team=false;
var adminMode=false;

function updateView(json) {  
  team=json?JSON.parse(json):false;
  if (team.userlevel<2) {adminMode=false}
  var mobile_head=document.getElementById('mobile_head');
  var mobile_main=document.getElementById('mobile_main');
  var mobile_options=document.getElementById('mobile_options');
  var mobile_admin=document.getElementById('mobile_admin');
  var mobile_footer=document.getElementById('mobile_footer');
  var selected='';

  // prepare weekday-selection
  var weekdays=[[1,'montags'],[2,'dienstags'],[3,'mittwochs'],[4,'donnerstags'],[5,'freitags'],[6,'samstags'],[0,'sonntags'],[7,'täglich'],[8,'ununregelmäßig']];
  var preset_weekday=(team.recurrence)&&(team.recurrence[0].weekday)?team.recurrence[0].weekday:new Date().getDay();
  var weekday_selection='<select id="weekday" onchange="display_hour_selection()">';
  var teams_weekday='';
  var i=-1;
  while (++i<weekdays.length) {
    if (preset_weekday==weekdays[i][0]) {selected=' selected'; teams_weekday=weekdays[i][1]} else {selected=''}
    weekday_selection+='<option value="'+weekdays[i][0]+'"'+selected+'>'+weekdays[i][1]+'</option>';
  }
  weekday_selection+='</select>';

  // prepare time-selection
  var preset_hour=(team.recurrence)&&(team.recurrence[0].time)?team.recurrence[0].time.slice(0,2):new Date().getHours();
  var hour_selection='<select id="hour">';
  var hour=-1; while (++hour<24) {
    hour<10?hour='0'+hour:true;
    if (hour==preset_hour) {selected=' selected'} else {selected=''}
    hour_selection+='<option value="'+hour+'"'+selected+'>'+hour+'</option>';
  }
  hour_selection+='</select>';
  var preset_minute=(team.recurrence)&&(team.recurrence[0].time)?team.recurrence[0].time.slice(3,5):(Math.floor(new Date().getMinutes()/5)*5);
  var minute_selection='<select id="minute">';
  var minute=0; while (minute<60) {
    minute<10?minute='0'+minute:true;
    if (minute==preset_minute) {selected=' selected'} else {selected=''}
    minute_selection+='<option value="'+minute+'"'+selected+'>'+minute+'</option>';
    minute=minute*1+5;
  }
  minute_selection+='</select>';

  var teams_hour=(team.recurrence)&&(team.recurrence[0].time)?team.recurrence[0].time.slice(0,2):'';
  var teams_minute=(team.recurrence)&&(team.recurrence[0].time)?team.recurrence[0].time.slice(3,5):'';
  var teams_weekday_time=teams_weekday+" "+((teams_hour)?teams_hour+':'+teams_minute:'');

  // HEAD
  var svg_menu='<svg xmlns="http://www.w3.org/2000/svg" id="svg_menu" fill="#000" width="24px" height="18px" viewBox="0 0 24 24"><path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/></svg>';
  mobile_head.innerHTML="<div class='head_wrapper'><button onclick=toggleView('mobile_options'); style=float:right>"+svg_menu+"</button><a href=/ style=text-decoration:none;font-weight:bold>wissenwerkommt</a><br><div style=font-size:0.7em>Startseite</div></div>";
  mobile_footer.innerHTML="<div id='footer_wrapper' class='footer_wrapper'><div style=font-size:0.7em;text-align:center>Immer besser zu <a href=/>wissenwerkommt</a>.</div></div>";

  if (!team) {
 
    // MAIN-page if no team is requested
    var admin_options_button='';
    serverRequest('getUserLevel',{'token':getCookie('token',true)},function (userlevel){
      if (userlevel>1) {admin_options_button=' <button onclick=\'toggleView("mobile_options","none");setAdminMode()\'>toggle Admin-Options</button>'} else {adminMode=false; setAdminMode(adminMode);}
      mobile_options.innerHTML='<div class="options_wrapper"><button onclick=\'toggleView("mobile_options","none");askCookie("name");\'>'+(getCookie("name",true)||"your name")+'</button> <button onclick=\'toggleView("mobile_options","none");askCookie("token")\'>'+(getCookie("token",true)||"set token")+'</button>'+admin_options_button+'</div>';
    });
    mobile_main.innerHTML='<div class="new_team_wrapper"><input type="text" id="name" value="" placeholder="name of your team" autocomplete="off"><br>'+weekday_selection+'<br>'+hour_selection+' '+minute_selection +'<br><input type="text" id="teamid" value="'+window.location.pathname.substr(1)+'" placeholder="team id" autocomplete="off"><br><input type="text" id="admintoken" value="'+(team.admintoken||'')+'" placeholder="admin token" autocomplete="off"><input type="hidden" id="teamtoken" value="'+(team.teamtoken||'')+'" autocomplete="off"><br><button onclick=addTeam()>create Team</button></div>';
    mobile_admin.innerHTML='ADMIN: <button onclick=load()>load</button> <button onclick=save()>save</button> <button onclick=dump()>dump</button>'
    mobile_footer.innerHTML="<div id='footer_wrapper' class='footer_wrapper'>Teams: </div>";
    serverRequest('getListOfTeamIDs',{},function (r){r=JSON.parse(r); r.forEach(function (t){document.getElementById('footer_wrapper').innerHTML+='<a href=/'+t+'>'+t+'</a> '})});
    // serverRequest('stats',{},function (r){mobile_main.innerHTML+="<br>Here are some stats: "+r});
 
  } else {
 
    // TEAM-page
    var admin_options_button='';
    if (team.userlevel>1) {admin_options_button=' <button onclick=\'toggleView("mobile_options","none");setAdminMode()\'>toggle Admin-Options</button>'} else {adminMode=false}
    mobile_options.innerHTML='<div class="options_wrapper"><button onclick=\'toggleView("mobile_options","none");askCookie("name");\'>'+(getCookie("name",true)||"your name")+'</button><button onclick=\'toggleView("mobile_options","none");askCookie("token")\'>'+(getCookie("token",true)||"set token")+'</button>'+admin_options_button+'</div>';
    
    if (team.error) {
      debug('ERROR: The server answered: '+JSON.stringify(team))
      mobile_main.innerHTML='<div class="error_wrapper">Fehler:<br>'+team.error+'<br><br>Maybe you need to <a href="/'+window.location.pathname.substr(1)+'" onclick=askCookie(\'token\')>set a(nother) token</a>?</div>';
      //getCookie('token');
    } else {
 
      mobile_head.innerHTML="<div class='head_wrapper'><button onclick=toggleView('mobile_options'); style=float:right>"+svg_menu+"</button><a href=/"+team.teamid+" style=text-decoration:none;font-weight:bold>"+(!!team.name?team.name:'')+"</a><br><div style=font-size:0.7em>"+teams_weekday_time+"</div></div>";
      var name=getCookie('name',true);
      mobile_main.innerHTML='';

      // display each event
      var event_counter=0;
      team.events?team.events.forEach(function (e) {
        event_counter++;

        var comment='<div class="admin" style="display:none"> <input type="text" id="comment'+e.datetime+'" value="'+(e.comment||'')+'" autocomplete="off"> <button onclick=commentEvent("'+e.datetime+'")>comment event</button></div>';
        var comment_inline='';
        if (e.comment) {comment_inline='<div class="comment_wrapper">'+(e.comment?e.comment:'')+'</div>';}

        // prepare content
        var peoples_list='';
        if (e.attendees) {e.attendees.forEach(function (att) {peoples_list+='<div class="attendee_item">'+att+'</div>'});}
        if (e.refusals) {e.refusals.forEach(function (ref) {peoples_list+='<div class="refusal_item">'+ref+'</div>'});}
        var attendees_counter='<div class="attendeescount_wrapper">'+(e.attendees?e.attendees.length:0)+' Teilnehmer</div>';
        var peoples_list_container='<div id="peoples_list_container_'+event_counter+'">'+peoples_list+'</div>';
        var day=['So','Mo','Di','Mi','Do','Fr','Sa'][new Date(e.datetime).getDay()]+' '+e.datetime.substring(8,10)+'.'+e.datetime.substring(5,7)+'. '+e.datetime.substring(11,16)+' Uhr';

        // show content
        if (event_counter==-1) {
          // Teaser / coming up next..
          button_text='Sei dabei!';
          if (e.attendees&&e.attendees.includes(name)) {button_text='Du bist dabei!'}
          else if (e.refusals&&e.refusals.includes(name)) {button_text='Schade!'} 
          mobile_main.innerHTML+='<div class="teaser_wrapper">'+button_text+'</div>';
        }

        // events
        mobile_main.innerHTML+='<div class="statusbutton_wrapper">'+
        '<button id="status'+e.datetime+'" onclick=toggleStatus("'+e.datetime+'")>'+day+'</button><br>'+comment_inline+comment+peoples_list_container+
        '</div>';
        document.getElementById('peoples_list_container_'+event_counter).className='statusbutton_wrapper_attendees_following';
        // set button-attributes to represent the state of attendence
        if (e.attendees&&e.attendees.includes(name)) {document.getElementById('status'+e.datetime).className='statusbutton_attending'}
        else if (e.refusals&&e.refusals.includes(name)) {document.getElementById('status'+e.datetime).className='statusbutton_refused'} 
        else {document.getElementById('status'+e.datetime).className='statusbutton_undecided'}

      }):false;

      mobile_admin.innerHTML='<div class="admin_wrapper"><input type="hidden" id="teamid" value="'+window.location.pathname.substr(1)+'" autocomplete="off"><input type="text" id="name" value="'+(team.name||'')+'" placeholder="name of the team" autocomplete="off"><br><input type="text" id="teamtoken" value="'+(team.teamtoken||'')+'" placeholder="team token" autocomplete="off"><br><input type="text" id="admintoken" value="'+(team.admintoken||'')+'" placeholder="admin token" autocomplete="off"><br>'+weekday_selection+' '+hour_selection+' '+minute_selection +'<br><button onclick=editTeam()>update Team</button> <button onclick=deleteTeam()>delete Team</button><br><input type="text" id="datetime" value="'+getDateString()+'T00:00" placeholder="datetime" autocomplete="off"><br><input type="text" id="comment" value="Einzeltermin" placeholder="comment" autocomplete="off"><br><button onclick=addEvent()>add Event</button></div>';

      debug('Team-JSON: '+JSON.stringify(team));
    }    
  }
  display_hour_selection();
  setAdminMode(adminMode);
}

function display_hour_selection() {
	var viewstate='inline';
  var element_weekday=document.getElementById('weekday');
  if (element_weekday) {
    if (element_weekday.value==8) {viewstate='none'}
    document.getElementById('hour').style.display=viewstate;
    document.getElementById('minute').style.display=viewstate;    
  }
}

// set/toggle view of admin-options
function setAdminMode(state) {
  if (state==undefined) {adminMode=!adminMode} else {adminMode=state}
  if (adminMode) {
    [].forEach.call(document.getElementsByClassName('admin'), function (c) {c.style.display='block'});
  } else {
    [].forEach.call(document.getElementsByClassName('admin'), function (c) {c.style.display='none'});
  }
}

function toggleStatus(datetime) {
  var e=findEvent(team,datetime);
  var name=getCookie('name',true);
  if (e.attendees&&e.attendees.includes(name)) {changeStatus("refuse",datetime)}
  else if (e.refusals&&e.refusals.includes(name)) {changeStatus("undecided",datetime)} 
  else {changeStatus("attend",datetime)}
}

function toggleView(id,state) {
  var e=document.getElementById(id);
  if (state) {e.style.display=state} 
  else if (e.currentStyle?e.currentStyle.display=='none':getComputedStyle(e, null).display=='none') {e.style.display='block'} else {e.style.display='none'}
}

function findEvent(team,datetime) {
  if (team.events instanceof Array) {
    return team.events.find(function(e) {return e.datetime==datetime})||false;
  } else {return false}
}

function updateStatus(json) {
  debug('The server answered: '+json);
  //var o=JSON.parse(json);
  getTeam();
}

function getTeam(teamid) {
  if (!teamid) {teamid=window.location.pathname.substr(1)}
  if (teamid) {
    serverRequest('getTeam',{token:getCookie('token',true),teamid:teamid},function (r){updateView(r)});
  } else {updateView()}
}

function changeStatus(status,datetime) {
  serverRequest(status,{token:getCookie('token',!team.teamtoken),teamid:window.location.pathname.substr(1),datetime:datetime,name:getCookie('name')},function (r){updateStatus(r);});
}

function addTeam() {
  serverRequest('addTeam',{teamid:document.getElementById('teamid').value,name:document.getElementById('name').value,teamtoken:document.getElementById('teamtoken').value,admintoken:document.getElementById('admintoken').value,recurrence:[{weekday:document.getElementById('weekday').value,time:document.getElementById('hour').value+':'+document.getElementById('minute').value}]},function (r){if (JSON.parse(r).hasOwnProperty('teamid')) {window.location.href = '/'+document.getElementById('teamid').value;} else {debug(r)}});
}

function editTeam() {
  serverRequest('editTeam',{token:getCookie('token',true),teamid:document.getElementById('teamid').value,name:document.getElementById('name').value,teamtoken:document.getElementById('teamtoken').value,admintoken:document.getElementById('admintoken').value,recurrence:[{weekday:document.getElementById('weekday').value,time:document.getElementById('hour').value+':'+document.getElementById('minute').value}]},function (r){updateStatus(r);});
}

function deleteTeam() {
  serverRequest('deleteTeam',{token:getCookie('token',true),teamid:document.getElementById('teamid').value},function (r){updateStatus(r);});
}

function addEvent() {
  serverRequest('addEvent',{token:getCookie('token',true),teamid:window.location.pathname.substr(1),datetime:document.getElementById('datetime').value,comment:document.getElementById('comment').value},function (r){updateStatus(r);});
}

function cancelEvent(datetime) {
  serverRequest('cancelEvent',{token:getCookie('token',true),teamid:window.location.pathname.substr(1),datetime:datetime},function (r){updateStatus(r);});
}

function reviveEvent(datetime) {
  serverRequest('reviveEvent',{token:getCookie('token',true),teamid:window.location.pathname.substr(1),datetime:datetime},function (r){updateStatus(r);});
}

function commentEvent(datetime) {
  serverRequest('commentEvent',{token:getCookie('token',true),teamid:window.location.pathname.substr(1),datetime:datetime,comment:document.getElementById('comment'+datetime).value},function (r){updateStatus(r);});
}

function deleteEvent(datetime) {
  serverRequest('deleteEvent',{token:getCookie('token',true),teamid:window.location.pathname.substr(1),datetime:datetime},function (r){updateStatus(r);});
}

function load() {
  serverRequest('load',{token:getCookie('token',true)},function (r){updateStatus(r);});
}

function save() {
  serverRequest('save',{token:getCookie('token',true)},function (r){updateStatus(r);});
}

function dump() {
  serverRequest('dump',{token:getCookie('token',true)},function (r){updateStatus(r);});
}

function getDateString(d) {
  if (!d) {d=new Date()}
  var tzoffset = d.getTimezoneOffset() * 60000;
  return (new Date(d-tzoffset)).toISOString().slice(0, -14);
} 

function serverRequest(apicall,json,callback) {
  var req = new XMLHttpRequest();
  req.onreadystatechange = function() {if (this.readyState == 4) {callback(this.responseText)}};
  req.open("POST","/api/"+apicall,true);
  req.setRequestHeader("Content-Type","application/json;charset=UTF-8");
  req.send(JSON.stringify(json));
}

function getCookie(cname,dontask) {
  var name = cname + "=";
  var ca = document.cookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      var res=c.substring(name.length, c.length);
      return res;
    }
  }
  if (dontask) {return} else {return askCookie(cname)}
}

function askCookie(cname) {
  var preval=getCookie(cname,true);
  var val = prompt("Please enter "+cname, preval);
  return setCookie(cname, val, 365); //-1 = sessioncookie
}

function setCookie(cname, cvalue, exdays) {
  var expires='';
  if (cvalue==""||cvalue==null) {exdays=0} //0 = delete cookie
  if (exdays>=0) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    expires = "expires="+d.toUTCString();
  }
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  getTeam();
  return getCookie(cname,true);
}

function debug(text) {
  console.log(text);
}

function checkSize() {
  var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
  debug('clientWidth: '+width);
}

is_mobile=1;
function check_mobile() 
{
  var old_mobile_status=is_mobile;
  var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
  var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  if ( (width<=1024) && (is_mobile!=-1) )//|| ((display_state(document.getElementById('mobile'))==='block')&&(is_mobile!=-1)) ) 
  {
    is_mobile=1;
    //console.log('mobile YES');
    //document.getElementById('under_mobile').style.display='none';
    document.getElementById('mobile').style.maxWidth='100vw';
    document.getElementById('mobile').style.height='100vh';
    document.getElementById('mobile').style.top=0;
    document.querySelector("meta[name=viewport]").setAttribute('content','initial-scale=1');
  }
  else 
  {
    if (is_mobile>0) {is_mobile=0}
    //console.log('mobile NO');
    //document.getElementById('under_mobile').style.display='block';
    document.getElementById('under_mobile').style.backgroundImage='url(images/phone.svg)';
    if (!document.getElementById("logoutIMG")) {
      var img = document.createElement("IMG");
      img.id='logoutIMG';
      img.src='/images/logout.svg';
      img.style.position='fixed';
      img.style.bottom='10px';
      img.style.right='10px';
      img.style.width='60px';
      document.getElementById('under_mobile').appendChild(img);
      //<img src="/images/logout.svg" style="position:fixed;bottom:10px;right:10px;width:60px">
    }
    
    var width=380; 
    document.getElementById('mobile').style.maxWidth=width+'px'; 
    document.getElementById('under_mobile').style.backgroundSize=width+58+'px 100%';
    document.getElementById('mobile').style.height='85%';
    document.getElementById('mobile').style.top='8%';
    document.querySelector("meta[name=viewport]").setAttribute('content','width=1024,initial-scale=1');
  }
  if (old_mobile_status!=is_mobile) {}
}

</script>

<style>
/* roboto-slab-regular - latin-ext */
/* 
@font-face {
  font-family: 'Roboto Slab';
  font-style: normal;
  font-weight: 400;
  font-display: fallback;
  src: url('/fonts/roboto-slab-v7-latin-ext-regular.eot');
  src: local('Roboto Slab Regular'), local('RobotoSlab-Regular'),
       url('/fonts/roboto-slab-v7-latin-ext-regular.eot?#iefix') format('embedded-opentype'),
       url('/fonts/roboto-slab-v7-latin-ext-regular.woff2') format('woff2'), 
       url('/fonts/roboto-slab-v7-latin-ext-regular.woff') format('woff'),
       url('/fonts/roboto-slab-v7-latin-ext-regular.ttf') format('truetype'), 
       url('/fonts/roboto-slab-v7-latin-ext-regular.svg#RobotoSlab') format('svg');
}
*/
/* roboto-regular - latin-ext */
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  font-display: block; //fallback
  src: url('/fonts/roboto-v18-latin-ext-regular.eot'); /* IE9 Compat Modes */
  src: local('Roboto'), local('Roboto-Regular'),
       url('/fonts/roboto-v18-latin-ext-regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('/fonts/roboto-v18-latin-ext-regular.woff2') format('woff2'), /* Super Modern Browsers */
       url('/fonts/roboto-v18-latin-ext-regular.woff') format('woff'), /* Modern Browsers */
       url('/fonts/roboto-v18-latin-ext-regular.ttf') format('truetype'), /* Safari, Android, iOS */
       url('/fonts/roboto-v18-latin-ext-regular.svg#Roboto') format('svg'); /* Legacy iOS */
}
  * {-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}
  body {padding:0; margin:0; background-color:#fff;font-family: 'Roboto', serif; font-size: 1.6em; color:#000; background-color:#c2c2c2;}
  /*
    green #86E082 #5BCF55 #3BBA34 #1DA416 #0E8108
    red   #FE9395 #FD686C #E34044 #C81B20 #9E090D
    brown #FFC393 #FFAC69 #E58A41 #CA691B #A04C0A
    blue  #6FBFBC #409B98 #278B87 #117B77 #06615E
  */
  .bigscreen {
    height:100vh;
    position:relative;
  }
  .under_mobile {
    display:none;
    position:fixed;
    z-index:-1;
    width:100%; height:100%;
    //background: url(images/phone.svg);
    background-repeat: no-repeat;
    background-position: top center;
    background-size: 490px 100%;
  }
  .mobile {background-color: #c2c2c2; padding:0; position:relative; z-index:99; overflow:auto; margin:auto;}
    .head {background-color: #c2c2c2; padding:0.8%;}
    .main {nobackground-color: #fff; padding:0.8%;}
    .options {background-color: #c2c2c2; padding:0.8%; display:none;}
    .admin {nobackground-color: #fff; display:none}
    .footer {background-color: #c2c2c2; padding:0.8%;}

  #mobile_admin {background-color: #c2c2c2; padding:0.8%;}
  #svg_menu {fill:#000;}
  /*#svg_menu:hover {fill:#ff0000;}*/
  a {color:inherit}
  a:hover {color:rgb(0,0,0); nobackground-color:rgb(245,0,0); notext-decoration:none; nopadding: 0 0.5em 0 0.5em; noborder-radius: 0.2em;}
  select, input, button {font-family: 'Roboto', serif; font-size: 1em; padding: 0 0.5em 0 0.5em; border-style: none; border-radius: 0.1em; background-color:rgb(235,235,235); outline:0; height:50px; margin:0 0 0.5em 0;}
 
  input {position:relative; display:inline-block; width:80%}

  button {
    border-radius: 0.1em;
    position: relative; overflow: hidden; display:inline-block; cursor: pointer; 
    background-color:#A2A2A2; background-image:linear-gradient(#A2A2A2 84%,#A2A2A2 0%);
    margin: 0 5px 5px 0;
    height:50px; letter-spacing: -0.9px; notext-transform: uppercase; text-align: center;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.16), 0 1px 1px rgba(0, 0, 0, 0.1);
  }
  button:before {
    -webkit-transition: 0.22s all ease;
    transition: 0.22s all ease;
    position: absolute;
    top: 92%;
    left: 0;
    bottom: 0;
    content: '';
    background-color: #000;
    opacity: 0.4;
    z-index: 2;
  }
  button:hover:before {
    top: 84%;
    right: 0;
    opacity: 0.24;
  }

  div.head_wrapper {
    border-radius: 0.2em; margin: 6px 1px 0px 6px; padding: 9px 6px 12px 9px; nobackground-color:#fff; text-align: left;
  }
  div.new_team_wrapper {
    border-radius: 0.2em; margin: 6px 6px 0px 6px; padding: 0px 6px 0px 9px; nobackground-color:#fff; text-align: left;
  }
  div.error_wrapper {
    border-radius: 0.2em; margin: 6px 6px 6px 6px; padding: 28px 6px; background-color:#fff; text-align: center;
  }
  div.options_wrapper {
    border-radius: 0.2em; margin: 6px 6px 6px 6px; padding: 0px 6px 20px 9px; nobackground-color:#fff; text-align: left;
  }
  div.admin_wrapper {
    border-radius: 0.2em; margin: 6px 6px; padding: 0px; nobackground-color:#fff; text-align: left;
  }
  div.attendeescount_wrapper {
    padding: 0px 6px; text-align: center; font-size:0.6em;
  }
  div.comment_wrapper {
    background-color: #fff; margin: 0px 0px 10px 0px; padding: 0px; text-align: center; display:inline-block; width:80%; 
  }
  div.footer_wrapper {
    border-radius: 0.2em; margin: 6px 6px 20px 6px; padding: 9px 6px 0px 9px; nobackground-color:#fff; text-align: left;
  }
  div.teaser_wrapper {
    border-radius: 0.2em; margin: 0px 6px 10px 6px; padding: 10px 0px 10px 0px; background-color:#fff; text-align: center; font-size:1em;
  }
  div.statusbutton_wrapper {
    border-radius: 0.2em; margin: 0px 6px 12px 6px; padding: 20px 0 10px 0; background-color:#fff; text-align: center; font-size:0.6em;
  }

  button.statusbutton_undecided, button.statusbutton_attending, button.statusbutton_refused {
    cursor: pointer; width:80%; margin:0px 0px 8px 0px; font-size:1.6em;
  }
  button.statusbutton_undecided {background-color:#ffbf00; background-image:linear-gradient(#ffbf00 84%,#efaf00 0%);}
  button.statusbutton_attending {background-color:#1DA416; background-image:linear-gradient(#1DB416 84%,#1DA416 0%);}
  button.statusbutton_refused   {background-color:#C81B20; background-image:linear-gradient(#D81B20 84%,#C81B20 0%);}

  div.statusbutton_wrapper_attendees_first {padding:8px;}
  div.statusbutton_wrapper_attendees_following {background-color: #fff; padding:8px 8px 0px 8px;}
  div.attendee_item, div.refusal_item {display:inline-block; white-space: nowrap; background-color:#ddd; border-radius: 0.1em; padding:4px; margin:0px 4px 8px 4px;}
  div.attendee_item {nocolor:#1DA416;}
  div.refusal_item {color:#999; nocolor:#C81B20; text-decoration:line-through;}
  

/* Extra small devices (phones, 600px and down) */
@media only screen and (max-width: 600px) {} 

/* Small devices (portrait tabvars and large phones, 600px and up) */
@media only screen and (min-width: 600px) {} 

/* Medium devices (landscape tabvars, 768px and up) */
@media only screen and (min-width: 768px) {} 

/* Large devices (laptops/desktops, 992px and up) */
@media only screen and (min-width: 1024px) {
  body {
    //background-color:#1DB416; 
    background-image:linear-gradient(#1DB416 78%, #1DA416 0%);
  }
  .mobile {
    border-radius: 0em;
  }
  .under_mobile {
    display:block;
  }
} 

/* Extra large devices (large laptops and desktops, 1200px and up) */
@media only screen and (min-width: 1200px) {}

</style>

</head>
<body onload="getTeam();check_mobile();" onresize="check_mobile()">

<div id="bigscreen" class="bigscreen">
  <div id="under_mobile" class="under_mobile" display="none"></div>
  <div id="mobile" class="mobile">
    <div id="mobile_head" class="head"></div>
    <div id="mobile_options" class="options"></div>
    <div id="mobile_admin" class="admin"></div>
    <div id="mobile_main" class="main"></div>
    <div id="mobile_footer" class="footer"></div>
  </div>
</div>
<!--<audio id="audio" no_controls="" no_autoplay><source src="sounds/smb_kick.wav" type="audio/wav">audio not supported</audio><button onclick=document.getElementById("audio").play()>play audio</button>-->

</body>

</html>
